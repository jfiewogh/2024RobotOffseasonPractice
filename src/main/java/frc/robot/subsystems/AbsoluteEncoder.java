package frc.robot.subsystems;

import com.ctre.phoenix6.configs.CANcoderConfiguration;
import com.ctre.phoenix6.configs.MagnetSensorConfigs;
import com.ctre.phoenix6.hardware.CANcoder;

import edu.wpi.first.math.util.Units;

public class AbsoluteEncoder {

    public enum EncoderConfig {
        /*
            again (swerve)
            FL: -10.722187598090983 ﻿
﻿﻿﻿﻿﻿﻿ FR: 10.784129217635995 ﻿
﻿﻿﻿﻿﻿﻿ BL: 10.75106503077387 ﻿
﻿﻿﻿﻿﻿﻿ BR: 10.793731552917142

            // run
            ﻿﻿﻿﻿﻿﻿ FL: -96.39205917256967 ﻿
﻿﻿﻿﻿﻿﻿ FR: -75.02783943371942 ﻿
﻿﻿﻿﻿﻿﻿ BL: -75.03708720629164 ﻿
﻿﻿﻿﻿﻿﻿ BR: -75.04204622719304 ﻿

            // after running
            ﻿﻿﻿﻿﻿﻿ FL: -96.41585858727763 ﻿
﻿﻿﻿﻿﻿﻿ FR: -75.02783943371942 ﻿
﻿﻿﻿﻿﻿﻿ BL: -75.03708720629164 ﻿
﻿﻿﻿﻿﻿﻿ BR: -75.04204622719304 ﻿

            // arcade

            beginning
            ﻿﻿﻿﻿﻿﻿ FL: -96.43965800198558 ﻿
﻿﻿﻿﻿﻿﻿ FR: -75.07546254825237 ﻿
﻿﻿﻿﻿﻿﻿ BL: -75.03708720629164 ﻿
﻿﻿﻿﻿﻿﻿ BR: -75.06586021297123 ﻿

            // after align
            ﻿﻿﻿﻿﻿﻿ FL: -86.74947859544758 ﻿
﻿﻿﻿﻿﻿﻿ FR: -78.45675225032663 ﻿
﻿﻿﻿﻿﻿﻿ BL: -84.22846002269135 ﻿
﻿﻿﻿﻿﻿﻿ BR: -75.01823709843826 ﻿

        */

        /*
FL: -0.22509764950720507 - -0.22509765625
FR: 0.1398925858902331 - 0.139892578125
BL: 0.32910158507241083 - 0.328857421875
BR: 0.05175781223570955 - 0.051513671875

FL: -0.22509764950720507 - -0.22509765625
FR: 0.1398925858902331 - 0.139892578125
BL: 0.32910158507241083 - 0.328857421875
BR: 2.670803710562713 - -0.072265625

FL: -0.22509764950720507 - -0.22509765625
FR: 0.1398925858902331 - 0.1396484375
BL: 0.32910158507241083 - 0.328857421875
BR: 6.099374714147468 - -0.233154296875

FL: -0.22509764950720507 - -0.22509765625
FR: 0.1398925858902331 - 0.139892578125
BL: 0.32910158507241083 - 0.328857421875
BR: 1.9803291108454337 - -0.04052734375


next run

﻿﻿﻿﻿﻿﻿ FL: -4.823521180125951 - -0.22509765625 ﻿
﻿﻿﻿﻿﻿﻿ FR: 3.0029297033996056 - 0.139892578125 ﻿
﻿﻿﻿﻿﻿﻿ BL: 7.052176389317427 - 0.328857421875 ﻿
﻿﻿﻿﻿﻿﻿ BR: 0.9992326940197797 - 0.046630859375 ﻿

﻿﻿﻿﻿﻿﻿ FL: -4.823521180125951 - -0.224853515625 ﻿
﻿﻿﻿﻿﻿﻿ FR: 3.0029297033996056 - 0.139892578125 ﻿
﻿﻿﻿﻿﻿﻿ BL: 7.052176389317427 - 0.328857421875 ﻿
﻿﻿﻿﻿﻿﻿ BR: 6.570664445285536 - -0.214599609375 ﻿

next run

﻿﻿﻿﻿﻿﻿ FL: -4.823521180125951 - -4.823521205357142 ﻿
﻿﻿﻿﻿﻿﻿ FR: 2.9924667642830354 - 2.997698102678571 ﻿
﻿﻿﻿﻿﻿﻿ BL: 7.0469453751050875 - 7.046944754464286 ﻿
﻿﻿﻿﻿﻿﻿ BR: -4.593331358974034 - -4.593331473214286 ﻿

﻿﻿﻿﻿﻿﻿ FL: -4.823521180125951 - -4.823521205357142 ﻿
﻿﻿﻿﻿﻿﻿ FR: 2.9924667642830354 - 2.992466517857143 ﻿
﻿﻿﻿﻿﻿﻿ BL: 7.0469453751050875 - 7.046944754464286 ﻿
﻿﻿﻿﻿﻿﻿ BR: -10.236241191685956 - 1.1038643973214286 ﻿

next run with swerve
no change to wheels

﻿﻿﻿﻿﻿﻿ FL: -10.794540247314872 - 1.1614118303571428 ﻿
﻿﻿﻿﻿﻿﻿ FR: 10.62203213261362 - -4.598563058035714 ﻿
﻿﻿﻿﻿﻿﻿ BL: 10.642227635951514 - 3.505161830357143 ﻿
﻿﻿﻿﻿﻿﻿ BR: 10.669905383852184 - -8.919852120535714 ﻿

next run
move wheels to different location

﻿﻿﻿﻿﻿﻿ FL: -10.704968235847435 - -5.869838169642857 ﻿
﻿﻿﻿﻿﻿﻿ FR: 10.61768509666186 - 9.181431361607142 ﻿
﻿﻿﻿﻿﻿﻿ BL: 10.637662033946315 - 8.485630580357142 ﻿
﻿﻿﻿﻿﻿﻿ BR: -10.64345160585078 - 0.06277901785714285 ﻿

again

﻿﻿﻿﻿﻿﻿ FL: -10.657348764082032 - -5.89599609375 ﻿
﻿﻿﻿﻿﻿﻿ FR: 10.68911491143789 - 9.129115513392856 ﻿
﻿﻿﻿﻿﻿﻿ BL: 10.685281505711718 - 8.380998883928571 ﻿
﻿﻿﻿﻿﻿﻿ BR: -10.667261948861407 - 0.07847377232142856 ﻿

test values rotating clockwise

﻿﻿﻿﻿﻿﻿ FL: -5.906459208462071 - -5.906459263392857 ﻿
﻿﻿﻿﻿﻿﻿ FR: 9.123883261864867 - 9.123883928571429 ﻿
﻿﻿﻿﻿﻿﻿ BL: 8.396693359719139 - 8.391462053571429 ﻿
﻿﻿﻿﻿﻿﻿ BR: 0.08893694617023308 - 0.08370535714285714 ﻿
﻿﻿﻿﻿﻿﻿  ﻿
﻿﻿﻿﻿﻿﻿ FL: -5.906459208462071 - -5.901227678571428 ﻿
﻿﻿﻿﻿﻿﻿ FR: 9.123883261864867 - 9.129115513392856 ﻿
﻿﻿﻿﻿﻿﻿ BL: 8.396693359719139 - 8.396693638392856 ﻿
﻿﻿﻿﻿﻿﻿ BR: 0.08893694617023308 - 0.08370535714285714 ﻿
﻿﻿﻿﻿﻿﻿  ﻿
﻿﻿﻿﻿﻿﻿ FL: -5.906459208462071 - -5.906459263392857 ﻿
﻿﻿﻿﻿﻿﻿ FR: 9.123883261864867 - 9.129115513392856 ﻿
﻿﻿﻿﻿﻿﻿ BL: 8.396693359719139 - 8.391462053571429 ﻿
﻿﻿﻿﻿﻿﻿ BR: 1.0889374388300868 - -0.8998325892857142 ﻿
﻿﻿﻿﻿﻿﻿  ﻿
﻿﻿﻿﻿﻿﻿ FL: -5.906459208462071 - -5.901227678571428 ﻿
﻿﻿﻿﻿﻿﻿ FR: 9.123883261864867 - 9.129115513392856 ﻿
﻿﻿﻿﻿﻿﻿ BL: 8.396693359719139 - 8.396693638392856 ﻿
﻿﻿﻿﻿﻿﻿ BR: 2.4698882319754523 - -2.317592075892857 ﻿
﻿﻿﻿﻿﻿﻿  ﻿
﻿﻿﻿﻿﻿﻿ FL: -5.906459208462071 - -5.906459263392857 ﻿
﻿﻿﻿﻿﻿﻿ FR: 9.123883261864867 - 9.123883928571429 ﻿
﻿﻿﻿﻿﻿﻿ BL: 8.396693359719139 - 8.396693638392856 ﻿
﻿﻿﻿﻿﻿﻿ BR: 3.4222674978907413 - -3.2749720982142856 ﻿
﻿﻿﻿﻿﻿﻿  ﻿
﻿﻿﻿﻿﻿﻿ FL: -5.906459208462071 - -5.906459263392857 ﻿
﻿﻿﻿﻿﻿﻿ FR: 9.123883261864867 - 9.129115513392856 ﻿
﻿﻿﻿﻿﻿﻿ BL: 8.396693359719139 - 8.396693638392856 ﻿
﻿﻿﻿﻿﻿﻿ BR: 4.469884644862965 - -4.3212890625 ﻿
﻿﻿﻿﻿﻿﻿  ﻿

after flip sign on swerve

﻿﻿﻿﻿﻿﻿ FL: 10.739851377976525 - -10.630580357142856 ﻿
﻿﻿﻿﻿﻿﻿ FR: -10.719141030157193 - -10.688127790178571 ﻿
﻿﻿﻿﻿﻿﻿ BL: -10.730054761758984 - 10.672433035714285 ﻿
﻿﻿﻿﻿﻿﻿ BR: 10.792308445058074 - -10.651506696428571 ﻿
﻿﻿﻿﻿﻿﻿  ﻿

again

﻿﻿﻿﻿﻿﻿ FL: 10.739851377976525 - -10.630580357142856 ﻿
﻿﻿﻿﻿﻿﻿ FR: -10.647712429637016 - -10.614885602678571 ﻿
﻿﻿﻿﻿﻿﻿ BL: -10.730054761758984 - 10.65673828125 ﻿
﻿﻿﻿﻿﻿﻿ BR: 10.673259158516641 - 10.65673828125

﻿﻿﻿﻿﻿﻿ FL: -10.688828347056713 - 10.698590959821429 ﻿
﻿﻿﻿﻿﻿﻿ FR: -10.67152155839179 - -10.630580357142856 ﻿
﻿﻿﻿﻿﻿﻿ BL: 10.770053563794432 - -10.630580357142856 ﻿
﻿﻿﻿﻿﻿﻿ BR: 10.792308445058074 - -10.651506696428571 ﻿


FL: 21.359872702898492 - 0.031389508928571425
FR: -0.011479935311237404 - -0.020926339285714284
BL: 0.012329594242832757 - -0.005231584821428571
BR: -0.04575296130634129 - -0.03662109375


forward

﻿﻿﻿﻿﻿﻿ FL: 26.6216925862155 - 5.247279575892857 ﻿
﻿﻿﻿﻿﻿﻿ FR: -3.7257622484188295 - -3.7458147321428568 ﻿
﻿﻿﻿﻿﻿﻿ BL: -6.654341244589345 - -6.691196986607142 ﻿
﻿﻿﻿﻿﻿﻿ BR: -1.3314681216653739 - -1.3602120535714286 ﻿
﻿﻿﻿﻿﻿﻿  ﻿


values facing forward

﻿﻿﻿﻿﻿﻿ FL: -6.136649333177951 - -5.634416852678571 ﻿
﻿﻿﻿﻿﻿﻿ FR: 19.60274977245161 - 9.892926897321429 ﻿
﻿﻿﻿﻿﻿﻿ BL: -2.6942661692716148 - 4.7607421875 ﻿
﻿﻿﻿﻿﻿﻿ BR: -1.0672433919882922 - -2.082170758928571


﻿﻿﻿﻿﻿﻿ FL: -0.12646484375 - -2.7099609375 ﻿
﻿﻿﻿﻿﻿﻿ FR: -0.06787109375 - -1.4543805803571428 ﻿
﻿﻿﻿﻿﻿﻿ BL: -0.09912109375 - -2.1240234375 ﻿
﻿﻿﻿﻿﻿﻿ BR: 0.0380859375 - 0.8161272321428571 ﻿


﻿﻿﻿﻿﻿﻿ FL: 0.240966796875 - 5.16357421875 ﻿
﻿﻿﻿﻿﻿﻿ FR: -0.04345703125 - -0.9312220982142857 ﻿
﻿﻿﻿﻿﻿﻿ BL: -0.2744140625 - -5.880301339285714 ﻿
﻿﻿﻿﻿﻿﻿ BR: 0.406982421875 - 8.721051897321429 ﻿



﻿﻿﻿﻿﻿﻿ FL: -4.712378520567725 - 0.5022321428571428 ﻿
﻿﻿﻿﻿﻿﻿ FR: -0.02092633832227199 - -9.636579241071429 ﻿
﻿﻿﻿﻿﻿﻿ BL: -0.5621280217321298 - 7.439313616071428 ﻿
﻿﻿﻿﻿﻿﻿ BR: -0.9264084581791959 - -0.9469168526785714 ﻿
﻿﻿﻿﻿﻿﻿  ﻿

last run
﻿﻿﻿﻿﻿﻿ FL: -0.490966796875 - -10.520717075892856 ﻿
﻿﻿﻿﻿﻿﻿ FR: 0.491455078125 - 10.531180245535714 ﻿
﻿﻿﻿﻿﻿﻿ BL: 0.484375 - 10.379464285714285 ﻿
﻿﻿﻿﻿﻿﻿ BR: 0.481689453125 - 10.321916852678571 ﻿



* 
         */

        

        // Modify these values
        FRONT_LEFT(23, 0.240966796875),
        FRONT_RIGHT(24, -0.06345703125),
        BACK_LEFT(25, -0.2744140625),
        BACK_RIGHT(26, -0.406982421875);

        private int id;
        private double offset; // in rotations

        private EncoderConfig(int id, double offset) {
            this.id = id;
            this.offset = offset;
        }

        public int getId() {
            return id;
        }

        public double getOffset() {
            return offset;
        }
    }

    public static CANcoder createAbsoluteEncoder(EncoderConfig config) {
        int id = config.getId();
        double offset = config.getOffset();

        CANcoder encoder = new CANcoder(id);
        
        CANcoderConfiguration canConfig = new CANcoderConfiguration();
        MagnetSensorConfigs magConfig = new MagnetSensorConfigs();
        
        magConfig.withMagnetOffset(offset);
        
        canConfig.withMagnetSensor(magConfig);
        encoder.getConfigurator().apply(canConfig);

        System.out.println(encoder.getAbsolutePosition().getValueAsDouble());
        
        return encoder;
    }
}
